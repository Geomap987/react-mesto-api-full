{"version":3,"sources":["images/Redcross.svg","images/Blank.svg","images/logo.svg","images/Blackcheck.svg","utils/token.js","utils/auth.js","components/Header.js","components/Card.js","contexts/CurrentUserContext.js","contexts/CardContext.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/PopupWithImage.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","contexts/CurrentCardContext.js","components/Mesto.js","components/ProtectedRoute.js","components/Register.js","components/Login.js","components/InfoToolTip.js","utils/Api.js","contexts/UserDataContext.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","setToken","token","localStorage","setItem","getToken","getItem","BASE_URL","Header","userEmail","buttonLink","buttonText","handleClick","className","src","logo","alt","onClick","to","Card","title","link","likesNumber","onCardClick","item","isOwn","isLiked","onCardLike","onCardDelete","type","CurrentUserContext","React","createContext","CardContext","Main","props","currentUser","useContext","avatar","onEditAvatar","name","onEditProfile","about","openAddPlace","cards","map","card","likes","some","i","_id","owner","key","length","Footer","PopupWithForm","isOpen","onClose","children","onSubmit","id","noValidate","PopupWithImage","image","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","onChange","target","value","placeholder","pattern","minLength","maxLength","required","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","AddPlacePopup","onAddPlace","linkRef","titleR","titleRef","CurrentCardContext","Mesto","history","useHistory","selectedCard","email","removeItem","push","isEditProfilePopupOpen","closeAllPopups","handleUpdateUser","isEditAvatarPopupOpen","handleUpdateAvatar","isAddPlacePopupOpen","handleAddPlaceSubmit","ProtectedRoute","Component","component","loggedIn","Register","registration","password","data","setData","handleChange","prevData","Login","authorization","username","InfoToolTip","api","address","this","_address","Promise","all","getUserInfo","getCardList","fetch","headers","then","res","ok","json","reject","status","method","body","JSON","stringify","cardId","methodValue","App","setCurrentUser","setCards","setSelectedCard","setLoggedIn","message","setMessage","registrationSuccess","setRegistrationSuccess","setImage","isInfoToolTipOpen","setInfoToolTipOpen","setEditAvatarPopupOpen","setEditProfilePopupOpen","setAddPlacePopupOpen","tokenCheck","jwt","console","log","catch","err","handleInfoToolTip","items","Provider","exact","path","deleteCard","newCard","newCards","filter","c","likeCard","a","editUserInfo","editUserAvatar","createCard","response","auth","check","cross","blank","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","unregister","error"],"mappings":"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","file":"static/js/main.6ebcab44.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Redcross.4072126c.svg\";","module.exports = __webpack_public_path__ + \"static/media/Blank.52df4a32.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.855a8c98.svg\";","module.exports = __webpack_public_path__ + \"static/media/Blackcheck.e38b395c.svg\";","const TOKEN_KEY = 'jwt';\r\n\r\nexport const setToken = (token) => {\r\n  localStorage.setItem(TOKEN_KEY, token);\r\n}\r\n\r\nexport const getToken = () => localStorage.getItem(TOKEN_KEY);\r\n\r\nexport const removeToken = () => {\r\n  localStorage.removeItem(TOKEN_KEY)\r\n}\r\n","import { setToken } from './token';\r\n\r\nexport const BASE_URL = 'https://api.lumpyspace.students.nomoredomains.rocks';\r\n\r\nexport const register = (password, email) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ password, email })\r\n  })\r\n    .then((response) => {\r\n      return response\r\n    })\r\n};\r\n\r\nexport const authorize = (password, email) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ password, email })\r\n  })\r\n    .then((response => response.json()))\r\n    .then((data) => {\r\n      if (data.token) {\r\n        setToken(data.token);\r\n        console.log(data)\r\n        return data;\r\n      } else {\r\n        return;\r\n      }\r\n    })\r\n};\r\n\r\nexport const getContent = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  })\r\n    .then(res => res.json())\r\n}\r\n","import React from 'react';\r\nimport logo from '../images/logo.svg';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nfunction Header({ userEmail, buttonLink, buttonText, handleClick }) {\r\n \r\n   \r\n    return (\r\n        <header className=\"header\">\r\n            <img className=\"header__logo\" src={logo} alt=\"Логотип Место. Россия\" />\r\n            <div className=\"header__container\">\r\n                <p className=\"header__email\">{userEmail}</p>\r\n                <button className=\"header__button\" onClick={handleClick}>\r\n                    <Link className='header__button-text' to={buttonLink} >{buttonText}</Link>\r\n                </button>\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nfunction Card({ title, link, likesNumber, onCardClick, item, isOwn, isLiked, onCardLike, onCardDelete}) {\r\n    function handleClick() {\r\n        onCardClick(item);\r\n    }\r\n    function handleLikeClick() {\r\n        onCardLike(item);\r\n    }\r\n    function handleDeleteClick() {\r\n        onCardDelete(item);\r\n    }\r\n\r\n    return (\r\n        <article className=\"photo-grid__card\">\r\n            <img className=\"photo-grid__photo\" src={link} alt={title} onClick={handleClick} />\r\n            <button onClick={handleDeleteClick} className={isOwn ? \"photo-grid__delete-icon\" : \"photo-grid__delete-icon_none\"}></button>\r\n            <div className=\"photo-grid__text\">\r\n                <h3 className=\"photo-grid__title\">{title}</h3>\r\n                <div className=\"photo-grid__like-wrapper\">\r\n                    <button onClick={handleLikeClick} type=\"button\" className={isLiked ? \"photo-grid__like-icon_active\" : \"photo-grid__like-icon\"} />\r\n                    <h4 className=\"photo-grid__like-counter\">{likesNumber}</h4>\r\n                </div>\r\n            </div>\r\n        </article>\r\n    );\r\n}\r\n\r\nexport default Card;\r\n\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\n\r\nexport const CardContext = React.createContext();","import React from 'react';\r\nimport Card from './Card.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { CardContext } from '../contexts/CardContext';\r\n\r\nfunction Main(props) {\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    // const cards = React.useContext(CardContext);\r\n    \r\n\r\n    return (\r\n        <main className=\"content\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__wrapper\">\r\n                    <div className=\"profile__photo-wrapper\">\r\n                        <img className=\"profile__photo\" src={currentUser.avatar} alt=\"Фотография профиля\" />\r\n                        <div onClick={props.onEditAvatar} className=\"profile__edit-pen\"></div>\r\n                    </div>\r\n                    <div className=\"profile__text-container\">\r\n                        <div className=\"profile__button-wrapper\">\r\n                            <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n                            <button onClick={props.onEditProfile} type=\"button\" className=\"profile__edit-button\" ></button>\r\n                        </div>\r\n                        <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n                    </div>\r\n                </div>\r\n                <button onClick={props.openAddPlace} type=\"button\" className=\"profile__add-button\"></button>\r\n            </section>\r\n            <section className=\"photo-grid\">\r\n                <div className=\"photo-grid__container\">\r\n                    {props.cards.map(card => \r\n                    <Card \r\n                    onCardDelete={props.onCardDelete} \r\n                    onCardLike={props.onCardLike} \r\n                    onCardClick={props.onCardClick}\r\n                    isLiked={card.likes.some(i => i._id === currentUser._id)} \r\n                    isOwn={card.owner._id === currentUser._id} \r\n                    key={card._id} \r\n                    title={card.name} \r\n                    link={card.link} \r\n                    likesNumber={card.likes.length} \r\n                    item={card} />)}\r\n                </div>\r\n            </section>\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\n\r\nfunction Footer() {\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\">&copy; 2020. Мария Васильева</p>\r\n        </footer>\r\n    );\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nconst PopupWithForm = ({ title, name, isOpen, onClose, children, onSubmit, buttonText }) => (\r\n\r\n    <section className={isOpen ? `popup popup-${name} popup_opened` : `popup popup-${name}`}>\r\n        <form id={`${name}form`} name={`${name}form`} className={`popup__container popup__container_${name}`} onSubmit={onSubmit} noValidate>\r\n            <button type=\"button\" onClick={onClose} id={`${name}button`} className=\"popup__close-button\"></button>\r\n            <h3 className=\"popup__title\">{title}</h3>\r\n            {children}\r\n            <button type=\"submit\" id=\"submit-button\" className={`popup__submit-button popup-${name}__submit-button`}>{buttonText}</button>\r\n        </form>\r\n    </section >\r\n)\r\n\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\n\r\nfunction PopupWithImage({ onClose, isOpen, image, title }) {\r\n    return (\r\n        <section id=\"bigphotopopup\" className={isOpen ? `popup popup-bigphotopopup popup_opened` : `popup popup-bigphotopopup`}>\r\n            <div className=\"popup__bigphoto-container \">\r\n                <button onClick={onClose} type=\"button\" id=\"bigphotobutton\" className=\"popup__close-button\"></button>\r\n                <img src={image} className=\"popup__bigphoto-image\" alt={title} />\r\n                <p className=\"popup__bigphoto-subtitle\">{title}</p>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default PopupWithImage;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\n\r\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  function handleName(e) {\r\n    setName(e.target.value);\r\n  }\r\n  function handleDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n  return (\r\n    <PopupWithForm onSubmit={handleSubmit} onClose={onClose} isOpen={isOpen} name={`profile`} title={`Редактировать профиль`} buttonText={`Сохранить`}>\r\n      <input onChange={handleName} type=\"text\" id=\"profilename\" name=\"name\" placeholder=\"Имя\" value={name} className=\"popup__input popup__input_title\" pattern=\"[a-zA-ZА-ЯЁа-яё\\s\\-]+\" minLength=\"2\" maxLength=\"40\" required />\r\n      <span className=\"popup__input-error\" id=\"profilename-error\"></span>\r\n      <input onChange={handleDescription} type=\"text\" id=\"profilejob\" name=\"about\" placeholder=\"Занятие\" value={description} className=\"popup__input popup__input_subtitle\" minLength=\"2\" maxLength=\"200\" required />\r\n      <span className='popup__input-error' id=\"profilejob-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    onUpdateAvatar({\r\n      avatar: avatarRef.current.value\r\n    });\r\n    avatarRef.current.value='';\r\n  }\r\n  return (\r\n    <PopupWithForm onSubmit={handleSubmit} onClose={onClose} isOpen={isOpen} name={`avatar`} title={`Обновить аватар`} buttonText={`Сохранить`}>\r\n      <input ref={avatarRef} type=\"url\" id=\"avatarlink\" name=\"avatar\" placeholder=\"Ссылка на аватар\" className=\"popup__input popup__input_avatar\" required />\r\n      <span className='popup__input-error' id=\"avatarlink-error\"></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace, titleR }) {\r\n    const linkRef = React.useRef();\r\n    const titleRef = React.useRef();\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        onAddPlace({\r\n            name: titleRef.current.value,\r\n            link: linkRef.current.value\r\n        });\r\n        \r\n    }\r\n\r\n    return (\r\n        <PopupWithForm onSubmit={handleSubmit} onClose={onClose} isOpen={isOpen} name={`addphoto`} title={`Новое место`} buttonText={`Создать`}>\r\n            <input ref={titleRef} type=\"text\" id=\"photoplace\" name=\"name\" placeholder=\"Название\" className=\"popup__input popup__input_title\" pattern=\"[a-zA-ZА-ЯЁа-яё\\s\\d\\-]+\" minLength=\"2\" maxLength=\"40\" required />\r\n            <span className='popup__input-error' id=\"photoplace-error\"></span>\r\n            <input ref={linkRef} type=\"url\" id=\"photolink\" name=\"link\" placeholder=\"Ссылка на картинку\" className=\"popup__input popup__input_subtitle\" required />\r\n            <span className='popup__input-error' id=\"photolink-error\"></span>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nexport const CurrentCardContext = React.createContext();","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Main from './Main.js';\r\nimport Footer from './Footer.js';\r\nimport Header from './Header.js';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport PopupWithImage from './PopupWithImage.js';\r\nimport EditProfilePopup from './EditProfilePopup.js';\r\nimport EditAvatarPopup from './EditAvatarPopup.js';\r\nimport AddPlacePopup from './AddPlacePopup.js';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { CurrentCardContext } from '../contexts/CurrentCardContext';\r\nimport { removeToken } from '../utils/token';\r\n\r\nconst Mesto = (props) => {\r\n \r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const history = useHistory();\r\n    const selectedCard = React.useContext(CurrentCardContext);\r\n\r\n    function signOut() {\r\n        removeToken();\r\n        history.push('/sign-in');\r\n    }\r\n\r\n    return (\r\n        <div className=\"page\">\r\n            <Header userEmail={currentUser.email} buttonLink={`/sign-in`} buttonText={`Выйти`} handleClick={signOut} />\r\n            <Main\r\n                onEditAvatar={props.onEditAvatar}\r\n                onEditProfile={props.onEditProfile}\r\n                openAddPlace={props.openAddPlace}\r\n                onCardClick={props.onCardClick}\r\n                onCardDelete={props.onCardDelete}\r\n                onCardLike={props.onCardLike}  \r\n                cards={props.cards}              \r\n            />\r\n            <Footer />\r\n            <EditProfilePopup \r\n            isOpen={props.isEditProfilePopupOpen} \r\n            onClose={props.closeAllPopups} \r\n            onUpdateUser={props.handleUpdateUser} />\r\n            <EditAvatarPopup \r\n            isOpen={props.isEditAvatarPopupOpen} \r\n            onClose={props.closeAllPopups} \r\n            onUpdateAvatar={props.handleUpdateAvatar} />\r\n            <AddPlacePopup \r\n            titleR={''} \r\n            onClose={props.closeAllPopups} \r\n            isOpen={props.isAddPlacePopupOpen} \r\n            onAddPlace={props.handleAddPlaceSubmit} />\r\n            <PopupWithForm \r\n            name={`confirm`} \r\n            title={`Вы уверены?`} \r\n            buttonText={`Да`} />\r\n            <PopupWithImage \r\n            onClose={props.closeAllPopups} \r\n            isOpen={selectedCard.link} \r\n            image={selectedCard.link} \r\n            title={selectedCard.name} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Mesto;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn === true ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Register = ({ registration }) => {\r\n  const [data, setData] = useState({\r\n    email: '',\r\n    password: '',\r\n  })\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setData((prevData) => ({\r\n      ...prevData,\r\n      [name]: value,\r\n    }));\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { email, password } = data;\r\n    registration(password, email)\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"register\">\r\n\r\n      <p className=\"register__welcome\">\r\n        Регистрация\r\n        </p>\r\n      <form onSubmit={handleSubmit} className=\"register__form\">\r\n        <input className=\"register__input\" id=\"email\" name=\"email\" type=\"email\" value={data.email} onChange={handleChange} placeholder=\"Email\" />\r\n        <input className=\"register__input\" id=\"password\" name=\"password\" type=\"password\" value={data.password} onChange={handleChange} placeholder=\"Пароль\" />\r\n        <div className=\"register__button-container\">\r\n          <button type=\"submit\" className=\"register__link\">Зарегистрироваться</button>\r\n        </div>\r\n      </form>\r\n      <div className=\"register__signin\">\r\n        <p>Уже зарегистрированы?</p>\r\n        <Link to=\"/sign-in\" className=\"register__login-link\">Войти</Link>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Register;\r\n","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Login = ({authorization }) => {\r\n    const [data, setData] = useState({\r\n        username: '',\r\n        password: '',\r\n    });\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setData((prevData) => ({\r\n            ...prevData,\r\n            [name]: value,\r\n        }));\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        const { password, username } = data;\r\n\r\n        if (!password || !username) {\r\n            return;\r\n        }\r\n        authorization(password, username);\r\n        setData({ password: '', username: '' });\r\n    }\r\n\r\n    return (\r\n        <div onSubmit={handleSubmit} className=\"login\">\r\n\r\n            <p className=\"login__welcome\">\r\n                Вход\r\n            </p>\r\n            <form className=\"login__form\">\r\n                <input className=\"login__input\" id=\"username\" required name=\"username\" type=\"text\" value={data.username} onChange={handleChange} placeholder=\"Email\" />\r\n                <input className=\"login__input\" id=\"password\" required name=\"password\" type=\"password\" value={data.password} onChange={handleChange} placeholder=\"Пароль\" />\r\n                <div className=\"login__button-container\">\r\n                    <button type=\"submit\" className=\"login__link\">Войти</button>\r\n                </div>\r\n            </form>\r\n            <div className=\"login__signup\">\r\n                <p>Ещё не зарегистрированы?</p>\r\n                <Link to=\"/sign-up\" className=\"signup__link\">Зарегистрироваться</Link>\r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login;\r\n","import React from 'react';\r\n\r\nfunction InfoToolTip({ onClose, isOpen, image, title }) {\r\n    return (\r\n        <section className={isOpen ? `popup popup_opened` : `popup`}>\r\n            <div className=\"popup__container \">\r\n                <button onClick={onClose} type=\"button\" className=\"popup__close-button\"></button>\r\n                <img src={image} className=\"popup__image\" alt={title} />\r\n                <p className=\"popup__subtitle\">{title}</p>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default InfoToolTip;","import { getToken } from './token';\r\n\r\nclass Api {\r\n    constructor({ address, token }) {\r\n      this._address = address;\r\n    }\r\n  \r\n    getInitialInfo() {\r\n      return Promise.all([this.getUserInfo(), this.getCardList()]);\r\n    }\r\n  \r\n    getUserInfo() {\r\n      const token = getToken();\r\n      return fetch(`${this._address}/users/me`, {\r\n        headers: {\r\n          authorization: token,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }).then((res) =>\r\n        res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`)\r\n      );\r\n    }\r\n  \r\n    editUserInfo({ name, about }) {\r\n      const token = getToken();\r\n      return fetch(`${this._address}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          authorization: token,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ name, about }),\r\n      }).then((res) =>\r\n        res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`)\r\n      );\r\n    }\r\n  \r\n    editUserAvatar({ avatar }) {\r\n      const token = getToken();\r\n      return fetch(`${this._address}/users/me/avatar`, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          authorization: token,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ avatar }),\r\n      }).then((res) =>\r\n        res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`)\r\n      );\r\n    }\r\n  \r\n    getCardList() {\r\n      const token = getToken();\r\n      return fetch(`${this._address}/cards`, {\r\n        headers: {\r\n          authorization: token,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }).then((res) =>\r\n        res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`)\r\n      );\r\n    }\r\n  \r\n    createCard({ name, link }) {\r\n      const token = getToken();\r\n      return fetch(`${this._address}/cards`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          authorization: token,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n          name,\r\n          link,\r\n        }),\r\n      }).then((res) =>\r\n        res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`)\r\n      );\r\n    }\r\n  \r\n    deleteCard(cardId) {\r\n      const token = getToken();\r\n      return fetch(`${this._address}/cards/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          authorization: token,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }).then((res) =>\r\n        res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`)\r\n      );\r\n    }\r\n  \r\n    likeCard(cardId, isLiked) {\r\n      const token = getToken();\r\n      let methodValue;\r\n      isLiked ? (methodValue = \"DELETE\") : (methodValue = \"PUT\");\r\n      return fetch(`${this._address}/cards/${cardId}/likes`, {\r\n        method: methodValue,\r\n        headers: {\r\n          authorization: token,\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }).then((res) =>\r\n        res.ok ? res.json() : Promise.reject(`Ошибка: ${res.status}`)\r\n      );\r\n    }\r\n  }\r\n  \r\n  export const api = new Api({\r\n    address: 'https://api.lumpyspace.students.nomoredomains.rocks',\r\n  });","import React from 'react';\r\n\r\nexport const UserDataContext = React.createContext();","import React, { useEffect, useState } from 'react';\nimport { Route, Switch, useHistory, Redirect } from 'react-router-dom';\nimport * as auth from '../utils/auth.js';\nimport { getToken, setToken } from '../utils/token';\n\nimport Header from './Header.js';\nimport Mesto from './Mesto.js';\nimport ProtectedRoute from './ProtectedRoute';\nimport Register from './Register.js';\nimport Login from './Login.js';\nimport InfoToolTip from './InfoToolTip.js';\n\nimport { api } from '../utils/Api.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { CurrentCardContext } from '../contexts/CurrentCardContext';\nimport { CardContext } from '../contexts/CardContext';\nimport { UserDataContext } from '../contexts/UserDataContext';\n\nimport cross from '../images/Redcross.svg';\nimport check from '../images/Blackcheck.svg';\nimport blank from '../images/Blank.svg';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({ title: '', link: '' });\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [message, setMessage] = useState('');\n  const [registrationSuccess, setRegistrationSuccess] = useState(false);\n  const [image, setImage] = useState({});\n  const [isInfoToolTipOpen, setInfoToolTipOpen] = React.useState(false);\n\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n\n\n  const history = useHistory();\n\n  \n  // useEffect(() => {\n  //   api.getUserInfo().then(\n  //     (res) => {\n  //       console.log(res)\n  //       const info = res;\n  //       setCurrentUser(info)\n  //     }).catch((err) => console.log(err));\n  // }, [])\n\n\n\n\n\n  //регистрация и авторизация\n  const authorization = (password, username) => {\n    auth.authorize(password, username)\n      .then((data) => {\n        console.log(data)\n        if (!data) {\n          setMessage('Что-то пошло не так! Попробуйте еще раз.')\n          setImage(cross)\n          handleInfoToolTip()\n        }\n        else {\n          setToken(data.token);\n          setMessage('');\n          setImage(blank)\n          tokenCheck()\n          history.push('/');\n        }\n      })\n      .then(() => {\n        api.getCardList().then(\n          (res) => {\n            console.log(res)\n            const items = res\n            setCards(items)\n          }).catch((err) => console.log(err));\n      })\n      .catch((err) => {\n        console.log(err);\n        handleInfoToolTip()\n      });\n      \n  }\n\n  const registration = (password, email) => {\n    auth.register(password, email).then((res) => {\n      console.log(res)\n      if (res.status !== 400) {\n        setMessage('Вы успешно зарегистрировались!');\n        setImage(check)\n        setRegistrationSuccess(true)\n        handleInfoToolTip();\n      } else {\n        setMessage('Что-то пошло не так!');\n        setImage(cross)\n        setRegistrationSuccess(false)\n        handleInfoToolTip();\n      }\n    }).catch((err) => {\n      console.log(err)\n      setMessage('Что-то пошло не так!');\n      setImage(cross)\n      setRegistrationSuccess(false)\n      handleInfoToolTip();\n    }\n    )\n  }\n\n  const tokenCheck = () => {\n    const jwt = getToken();\n    if (!jwt) {\n      return;\n    }\n    auth.getContent(jwt).then((res) => {\n      if (res) {\n        const currentUser = res;\n        console.log(currentUser)\n        setLoggedIn(true);\n        setCurrentUser(currentUser);\n        history.push('/')\n      }\n      else {\n        return\n      }\n    }).catch(err => console.log(err))\n  }\n\n  function handleInfoToolTip() {\n    setInfoToolTipOpen(!isInfoToolTipOpen)\n  }\n\n  function closeInfoToolTip() {\n    setInfoToolTipOpen(false)\n    setMessage('')\n    setImage(blank)\n  }\n\n  function closeInfoToolTipPush() {\n    setInfoToolTipOpen(false);\n    setMessage('')\n    setImage(blank)\n    if (registrationSuccess) { history.push('/sign-in') }\n  }\n\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n\n    useEffect(() => {\n    api.getCardList().then(\n      (res) => {\n        console.log(res)\n        const items = res\n        setCards(items)\n        console.log(items)\n      }).catch((err) => console.log(err));\n  }, [])\n\n  //обработка событий карточек и попапов\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function handleCardLike(card) {\n    console.log(currentUser._id)\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.likeCard(card._id, isLiked).then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      console.log(newCard)\n      setCards(newCards);\n    }).catch((err) => console.log(err));\n  }\n\n  function handleCardDelete(card) {\n    console.log(card.owner._id === currentUser._id)\n    api.deleteCard(card._id).then((newCard) => {\n      const newCards = cards.filter((c) => c._id !== card._id);\n      setCards(newCards);\n    }).catch((err) => console.log(err));\n  }\n\n \n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(!isEditAvatarPopupOpen)\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(!isEditProfilePopupOpen)\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(!isAddPlacePopupOpen)\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false)\n    setEditProfilePopupOpen(false)\n    setAddPlacePopupOpen(false)\n    setSelectedCard({ title: '', link: '' })\n  }\n\n  function handleUpdateUser(a) {\n    api.editUserInfo(a).then(\n      (res) => {\n        const info = res;\n        setCurrentUser(info)\n        closeAllPopups()\n      }).catch((err) => console.log(err));\n\n  }\n\n  function handleUpdateAvatar(a) {\n    api.editUserAvatar(a).then(\n      (res) => {\n        const info = res;\n        setCurrentUser(info)\n        closeAllPopups()\n      }).catch((err) => console.log(err));\n  }\n\n  function handleAddPlaceSubmit(a) {\n   \n    api.createCard(a).then(\n      (newCard) => {\n        console.log(newCard.owner._id)\n        console.log(currentUser._id)\n        console.log(newCard)\n        setCards([...cards, newCard])\n        closeAllPopups()\n      }).catch((err) => console.log(err));\n  }\n\n\n\n\n  return (\n      <CurrentUserContext.Provider value={currentUser}>\n        <CardContext.Provider value={cards}>\n          <CurrentCardContext.Provider value={selectedCard}>\n            <Switch>\n              <ProtectedRoute exact path=\"/\" loggedIn={loggedIn} component={Mesto}\n                onEditAvatar={handleEditAvatarClick}\n                onEditProfile={handleEditProfileClick}\n                openAddPlace={handleAddPlaceClick}\n                onCardClick={handleCardClick}\n                onCardDelete={handleCardDelete}\n                onCardLike={handleCardLike}\n                cards={cards}\n                closeAllPopups={closeAllPopups}\n                isEditProfilePopupOpen={isEditProfilePopupOpen}\n                isEditAvatarPopupOpen={isEditAvatarPopupOpen}\n                isAddPlacePopupOpen={isAddPlacePopupOpen}\n                handleUpdateUser={handleUpdateUser}\n                handleUpdateAvatar={handleUpdateAvatar}\n                handleAddPlaceSubmit={handleAddPlaceSubmit}\n              />\n              <Route path=\"/sign-up\">\n                <div className=\"page\">\n                  <Header \n                  userEmail={``} \n                  buttonLink={`/sign-in`} \n                  buttonText={`Войти`} />\n                  <Register \n                  registration={registration} />\n                  <InfoToolTip \n                  title={message} \n                  image={image} \n                  isOpen={isInfoToolTipOpen} \n                  onClose={closeInfoToolTipPush} />\n                </div>\n              </Route>\n              <Route path=\"/sign-in\">\n                <div className=\"page\">\n                  <Header \n                  userEmail={``}\n                  buttonLink={`/sign-up`} \n                  buttonText={`Регистрация`} />\n                  <Login authorization={authorization} />\n                  <InfoToolTip \n                  title={message} \n                  image={image} \n                  isOpen={isInfoToolTipOpen} \n                  onClose={closeInfoToolTip} />\n                </div>\n              </Route>\n              <Redirect to={\"/\"} />\n            </Switch>\n          </CurrentCardContext.Provider>\n        </CardContext.Provider>\n      </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}